<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>--马拉比丘--</title>
    <style>
        html, body {
            height: 100%;
            width: 100%;
            margin: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            
        }
        body {
            overflow: hidden;
        }
        .cover {
            opacity: 0;
            transition: all ease-in-out 1s;
            width: 100%;
            height: 100%;
            transform: scale(1.5);
            display: flex;
            align-items: center;
            background-image: url(./static/bg4.jpg);
            background-repeat: no-repeat;
            background-size: cover;
            background-position: center center;
            justify-content: center;
            position: absolute;
            text-align: center;
        }
        .title {
            transform: scale(0.2);
            transition: all ease-in-out 2s;
            text-align: center;
            width: 1000px;
            position: fixed;
            font-size: 60px;
            font-family: Georgia, 'Times New Roman', Times, serif;
            display: inline;
            color: #474747;
            opacity: 0;
        }
        .mlbq {
            display: inline-block;
            color: #222222;
            border-bottom: brown 1px;
            font-style: italic;
            cursor: pointer;
        }
        .eng {
            font-size: 5px;
            height: 10px;
            line-height: 10px;
            margin: 0 auto;
        }
        .logo {
            bottom: 0;
            right: 0;
        }
        .bar {
            height: 40px;
            width: 100%;
            background-image: url(./static/nav-bg.jpg);
            background-position: right;
            background-size: cover;
            position: fixed;
            z-index: 10;
            top: 0;
            display: flex;
        }
        .bar_logo {
            height: 30px;
            padding: 5px;
        }
        .bar_btn {
            height: 30px;
            padding-top: 5px;
            padding-left: 20px;
            width: auto;
            font-style: italic;
            color: aliceblue;
            font-family: Georgia, 'Times New Roman', Times, serif;
            font-size: 15px;
            line-height: 30px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div id="bar" class="bar"><img src="./static/logo_white.png" class="bar_logo">
        <div style="height: 30px; margin: 5px; background-color: aliceblue; width: 2px;"></div>
        <div class="bar_btn" id="cover_btn">主页</div>
        <div class="bar_btn" id="skin_btn">服务器更换皮肤</div>
    </div>
    <div id="cover" class="cover">
        <div id="title" class="title">欢迎来到<div id="mlbq" class="mlbq"></div>！</div>
    </div>
    <div id="skin" class="cover">
        <h1 style="padding-top: 100px;">输入皮肤</h1>
        <div style="width: auto;">
        <div style="margin-right: 20px; text-align: left; display: inline-block;">
        <div>皮肤站：
            <input
                type="radio"
                id="littleskin"
                name="contact"
                value="0"
                checked />
            <label for="littleskin">Littleskin</label>
            <input type="radio" id="mcskin" name="contact" value="1" />
            <label for="mcskin"><del>红石皮肤站</del></label>
            </div>
            <div>
            </div><br>
        角色名: <input type="text" name="chname" value="Falsw" id="chname"><br><br>
        <button id="skinsearchbtn">获取</button><br><br>
        <iframe src="" style="height: 100px; width: 280px;" id="ifram"></iframe>
        <p style="color: rgb(115, 243, 41); display: none;" id="sign">请复制到右边的文本框！</p>
    </div>
    <div style="display: inline-block; background-color: black; height: 200px; width: 3px;"></div>
    <div style="display: inline-block;">
        <textarea type="text" id="thejson" style="width: 280px;height: 100px;"></textarea><br><br>
        <button id="skinimgbtn">提交</button><img src="" style="height: 100px;" id="finalimg">
        <div style="color: red; display: none;" id="final"></div>
    </div>
        </div></div>
    <img src="./static/马拉比丘.png" class="logo" id="logo">
</body>
<script>

    var title = document.getElementById("title");
    var mlbq = document.getElementById("mlbq");
    var cover = document.getElementById("cover");
    mlbq.innerText = "马拉比丘";
    var isclicked = 0;
    mlbq.onclick = () => {
        if (isclicked === 1) {
            window.location.href = "https://qm.qq.com/cgi-bin/qm/qr?k=YxehdBO3chGekZ5t2m5lFgO3xgcMX3mD&jump_from=webapi&authKey=OPf6SqCFxjOFTUJ+ekUmfhrsenIS2Wi9/jKDBjfqOlewuiiZzrBTJMn2h0ZacP1g";
        } else {
            isclicked = 1;
        }
        mlbq.innerText = "进入群聊";
    }
    mlbq.onmouseleave = () => {
        mlbq.innerText = "马拉比丘";
        isclicked = 0;
    }
    var skin = document.getElementById("skin");
    skin.style.display = "block";
    window.onload = () => {
        title.style.transform = "scale(1)";
        title.style.opacity = "1";
        cover.style.transform = "scale(1)";
        cover.style.opacity = "1";
        skin.style.transform = "scale(1)";
    }
    function allhide () {
        var logo = document.getElementById("logo");
        document.body.style.overflow = "visible";
        logo.style.display = "none";
        skin.style.opacity = "0";
        skin.style.zIndex = "0";
        cover.style.opacity = "0";
        cover.style.zIndex = "0";
    }
    var cover_btn = document.getElementById("cover_btn");
    cover_btn.onclick = () => {
        allhide();
        cover.style.opacity = "1";
        cover.style.zIndex = "9";
    }
    var skin_btn = document.getElementById("skin_btn");
    skin_btn.onclick = () => {
        allhide();
        skin.style.opacity = "1";
        skin.style.zIndex = "9";
    }
    var skinsearchbtn = document.getElementById("skinsearchbtn");
    var skinchoice = document.getElementsByName("contact");
    var chname = document.getElementById("chname");
    skinsearchbtn.onclick = () => {
        for (var i = 0; i < skinchoice.length; i++) {
            if (skinchoice[i].checked) {
                var choice = skinchoice[i].value;
                choice = choice + '';
                break;
            }
        }
        var thechname = chname.value;
        var sign = document.getElementById("sign");
        if (choice==="0") {
            var root = "https://littleskin.cn/";
        } else if (choice==="1") {
            var root = "https://mcskin.mahua-a.top/";
        }
        console.log(root);
        var ifram = document.getElementById("ifram");
        ifram.src = root + "csl/" + thechname + ".json";
        console.log(ifram.src);
        sign.style.display = "block";
        var thejson = document.getElementById("thejson");
        var skinimgbtn = document.getElementById("skinimgbtn");
        skinimgbtn.onclick = () => {
            const data = JSON.parse(thejson.value);
            console.log(data);
            if(data.skins.slim) {
                var skin = data.skins.slim;
            } else if (data.skins.default) {
                var skin = data.skins.default;
            }
            console.log(skin);
            var final = document.getElementById("final");
            var finalimg = document.getElementById("finalimg");
            lastimg = root + "textures/" + skin;
            finalimg.src = lastimg;
            thejson.value = "在服务器运行指令：" + "/skin url " + lastimg;
        }
    }
</script>
</html>